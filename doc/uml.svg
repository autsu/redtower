<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="794px" preserveAspectRatio="none" style="width:2684px;height:794px;" version="1.1" viewBox="0 0 2684 794" width="2684px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="303" x="1192.5" y="16.708">https://github.com/autsu/redtower</text><!--MD5=[aa2f05b2676d7d34ffa7e771fb7634f3]
cluster client--><polygon fill="#FFFFFF" points="2320,75.4531,2369,75.4531,2376,97.75,2590,97.75,2590,222.4531,2320,222.4531,2320,75.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2320" x2="2376" y1="97.75" y2="97.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="2324" y="90.4482">client</text><!--MD5=[a17f76d92a579d1a1e67299d1a2f9f08]
cluster example--><polygon fill="#FFFFFF" points="2237,598.9531,2309,598.9531,2316,621.25,2662,621.25,2662,694.9531,2237,694.9531,2237,598.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2237" x2="2316" y1="621.25" y2="621.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="2241" y="613.9482">example</text><!--MD5=[4ef80439e1ef409f8f3a0ec422262701]
cluster server--><polygon fill="#FFFFFF" points="14,36.9531,72,36.9531,79,59.25,2229,59.25,2229,694.9531,14,694.9531,14,36.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="79" y1="59.25" y2="59.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="18" y="51.9482">server</text><!--MD5=[f897802e9e865a9853ac3847e806ac21]
class client.Client--><rect fill="#FEFECE" height="112.0234" id="client.Client" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="253" x="2328.5" y="102.4531"/><ellipse cx="2433.25" cy="118.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2432.7344,119.0156 Q2430.875,118.3125 2430.2188,117.5469 Q2429.5781,116.7656 2429.5781,115.4531 Q2429.5781,113.7656 2430.6563,112.7969 Q2431.7344,111.8281 2433.6094,111.8281 Q2434.4688,111.8281 2435.3125,112.0313 Q2436.1719,112.2188 2437.0156,112.6094 L2437.0156,115 Q2436.2344,114.4375 2435.4063,114.1563 Q2434.5938,113.8594 2433.7969,113.8594 Q2432.9219,113.8594 2432.4375,114.2188 Q2431.9688,114.5781 2431.9688,115.2344 Q2431.9688,115.75 2432.3125,116.0938 Q2432.6563,116.4219 2433.75,116.8281 L2434.8125,117.2344 Q2436.2969,117.7813 2437,118.6875 Q2437.7188,119.5938 2437.7188,120.9688 Q2437.7188,122.8438 2436.6094,123.7656 Q2435.5,124.6875 2433.25,124.6875 Q2432.3281,124.6875 2431.4063,124.4688 Q2430.4844,124.25 2429.625,123.8281 L2429.625,121.2969 Q2430.5938,121.9844 2431.5156,122.3281 Q2432.4375,122.6719 2433.3281,122.6719 Q2434.2344,122.6719 2434.7344,122.2656 Q2435.2344,121.8438 2435.2344,121.1094 Q2435.2344,120.5469 2434.8906,120.1406 Q2434.5625,119.7188 2433.9375,119.4688 L2432.7344,119.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="35" x="2453.75" y="122.6074">Client</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2329.5" x2="2580.5" y1="134.4531" y2="134.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2336.5" y="142.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="2348.5" y="148.6636">conn server.Conn</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2336.5" y="155.2578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="2348.5" y="161.4683">err error</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2329.5" x2="2580.5" y1="168.0625" y2="168.0625"/><ellipse cx="2339.5" cy="179.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="2348.5" y="182.2729">Init(ctx context.Context) (*Client, error)</text><ellipse cx="2339.5" cy="191.8672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="227" x="2348.5" y="195.0776">Send(msgHeader *server.Message) (int, error)</text><ellipse cx="2339.5" cy="204.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="2348.5" y="207.8823">Receive() (*server.Message, error)</text><!--MD5=[acb627e678fd73a89d34d1423aedd2b8]
class example.EchoHandler--><rect fill="#FEFECE" height="60.8047" id="example.EchoHandler" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="2478.5" y="625.9531"/><ellipse cx="2521.85" cy="641.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2521.3344,642.5156 Q2519.475,641.8125 2518.8188,641.0469 Q2518.1781,640.2656 2518.1781,638.9531 Q2518.1781,637.2656 2519.2563,636.2969 Q2520.3344,635.3281 2522.2094,635.3281 Q2523.0688,635.3281 2523.9125,635.5313 Q2524.7719,635.7188 2525.6156,636.1094 L2525.6156,638.5 Q2524.8344,637.9375 2524.0063,637.6563 Q2523.1938,637.3594 2522.3969,637.3594 Q2521.5219,637.3594 2521.0375,637.7188 Q2520.5688,638.0781 2520.5688,638.7344 Q2520.5688,639.25 2520.9125,639.5938 Q2521.2563,639.9219 2522.35,640.3281 L2523.4125,640.7344 Q2524.8969,641.2813 2525.6,642.1875 Q2526.3188,643.0938 2526.3188,644.4688 Q2526.3188,646.3438 2525.2094,647.2656 Q2524.1,648.1875 2521.85,648.1875 Q2520.9281,648.1875 2520.0063,647.9688 Q2519.0844,647.75 2518.225,647.3281 L2518.225,644.7969 Q2519.1938,645.4844 2520.1156,645.8281 Q2521.0375,646.1719 2521.9281,646.1719 Q2522.8344,646.1719 2523.3344,645.7656 Q2523.8344,645.3438 2523.8344,644.6094 Q2523.8344,644.0469 2523.4906,643.6406 Q2523.1625,643.2188 2522.5375,642.9688 L2521.3344,642.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="2542.15" y="646.1074">EchoHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2479.5" x2="2652.5" y1="657.9531" y2="657.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2479.5" x2="2652.5" y1="665.9531" y2="665.9531"/><ellipse cx="2489.5" cy="676.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="2498.5" y="680.1636">Handle(r *server.Request)</text><!--MD5=[9a7284038d469b5dbbfc797ee866d59c]
class example.HttpEchoPostFormHandler--><rect fill="#FEFECE" height="60.8047" id="example.HttpEchoPostFormHandler" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="2245" y="625.9531"/><ellipse cx="2260" cy="641.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2259.4844,642.5156 Q2257.625,641.8125 2256.9688,641.0469 Q2256.3281,640.2656 2256.3281,638.9531 Q2256.3281,637.2656 2257.4063,636.2969 Q2258.4844,635.3281 2260.3594,635.3281 Q2261.2188,635.3281 2262.0625,635.5313 Q2262.9219,635.7188 2263.7656,636.1094 L2263.7656,638.5 Q2262.9844,637.9375 2262.1563,637.6563 Q2261.3438,637.3594 2260.5469,637.3594 Q2259.6719,637.3594 2259.1875,637.7188 Q2258.7188,638.0781 2258.7188,638.7344 Q2258.7188,639.25 2259.0625,639.5938 Q2259.4063,639.9219 2260.5,640.3281 L2261.5625,640.7344 Q2263.0469,641.2813 2263.75,642.1875 Q2264.4688,643.0938 2264.4688,644.4688 Q2264.4688,646.3438 2263.3594,647.2656 Q2262.25,648.1875 2260,648.1875 Q2259.0781,648.1875 2258.1563,647.9688 Q2257.2344,647.75 2256.375,647.3281 L2256.375,644.7969 Q2257.3438,645.4844 2258.2656,645.8281 Q2259.1875,646.1719 2260.0781,646.1719 Q2260.9844,646.1719 2261.4844,645.7656 Q2261.9844,645.3438 2261.9844,644.6094 Q2261.9844,644.0469 2261.6406,643.6406 Q2261.3125,643.2188 2260.6875,642.9688 L2259.4844,642.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="166" x="2274" y="646.1074">HttpEchoPostFormHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2246" x2="2442" y1="657.9531" y2="657.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2246" x2="2442" y1="665.9531" y2="665.9531"/><ellipse cx="2256" cy="676.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="2265" y="680.1636">Handle(req *server.Request)</text><!--MD5=[920aed032efc83383efa752b2699bc8a]
class server.BasicHandler--><rect fill="#FEFECE" height="86.4141" id="server.BasicHandler" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="186" x="1282" y="396.4531"/><ellipse cx="1329.75" cy="412.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1329.2344,413.0156 Q1327.375,412.3125 1326.7188,411.5469 Q1326.0781,410.7656 1326.0781,409.4531 Q1326.0781,407.7656 1327.1563,406.7969 Q1328.2344,405.8281 1330.1094,405.8281 Q1330.9688,405.8281 1331.8125,406.0313 Q1332.6719,406.2188 1333.5156,406.6094 L1333.5156,409 Q1332.7344,408.4375 1331.9063,408.1563 Q1331.0938,407.8594 1330.2969,407.8594 Q1329.4219,407.8594 1328.9375,408.2188 Q1328.4688,408.5781 1328.4688,409.2344 Q1328.4688,409.75 1328.8125,410.0938 Q1329.1563,410.4219 1330.25,410.8281 L1331.3125,411.2344 Q1332.7969,411.7813 1333.5,412.6875 Q1334.2188,413.5938 1334.2188,414.9688 Q1334.2188,416.8438 1333.1094,417.7656 Q1332,418.6875 1329.75,418.6875 Q1328.8281,418.6875 1327.9063,418.4688 Q1326.9844,418.25 1326.125,417.8281 L1326.125,415.2969 Q1327.0938,415.9844 1328.0156,416.3281 Q1328.9375,416.6719 1329.8281,416.6719 Q1330.7344,416.6719 1331.2344,416.2656 Q1331.7344,415.8438 1331.7344,415.1094 Q1331.7344,414.5469 1331.3906,414.1406 Q1331.0625,413.7188 1330.4375,413.4688 L1329.2344,413.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="1350.25" y="416.6074">BasicHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1283" x2="1467" y1="428.4531" y2="428.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1283" x2="1467" y1="436.4531" y2="436.4531"/><ellipse cx="1293" cy="447.4531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="1302" y="450.6636">BeforeHandle(req *Request)</text><ellipse cx="1293" cy="460.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1302" y="463.4683">Handle(req *Request)</text><ellipse cx="1293" cy="473.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="1302" y="476.2729">AfterHandle(req *Request)</text><!--MD5=[7fbbad6632120bf6ab5dc0d21e62a953]
class server.Conn--><rect fill="#FEFECE" height="188.8516" id="server.Conn" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="1426" y="63.9531"/><ellipse cx="1511.75" cy="79.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1507.6719,75.7188 L1507.6719,73.5625 L1515.0625,73.5625 L1515.0625,75.7188 L1512.5938,75.7188 L1512.5938,83.7969 L1515.0625,83.7969 L1515.0625,85.9531 L1507.6719,85.9531 L1507.6719,83.7969 L1510.1406,83.7969 L1510.1406,75.7188 L1507.6719,75.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="32" x="1532.25" y="84.1074">Conn</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1427" x2="1637" y1="95.9531" y2="95.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1427" x2="1637" y1="103.9531" y2="103.9531"/><ellipse cx="1437" cy="114.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="1446" y="118.1636">Server() Server</text><ellipse cx="1437" cy="127.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="1446" y="130.9683">SocketConn() net.Conn</text><ellipse cx="1437" cy="140.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="1446" y="143.7729">Addr() net.Addr</text><ellipse cx="1437" cy="153.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="1446" y="156.5776">ConnID() uint64</text><ellipse cx="1437" cy="166.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="1446" y="169.3823">IsClose() bool</text><ellipse cx="1437" cy="178.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1446" y="182.187">HeartBeatChan()</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="1544" y="182.187">chan</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1575" y="182.187"/><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="1575" y="182.187">struct</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1608" y="182.187">{}</text><ellipse cx="1437" cy="191.7813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="1446" y="194.9917">SetIsClose( bool)</text><ellipse cx="1437" cy="204.5859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="1446" y="207.7964">Send(data *Message) (int, error)</text><ellipse cx="1437" cy="217.3906" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="1446" y="220.6011">Receive() (*Message, error)</text><ellipse cx="1437" cy="230.1953" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1446" y="233.4058">Handler()</text><ellipse cx="1437" cy="243" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="1446" y="246.2104">Close()</text><!--MD5=[c12e1d6db59fe05cc6bf64438473c557]
class server.ConnManage--><rect fill="#FEFECE" height="150.4375" id="server.ConnManage" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="1673" y="83.4531"/><ellipse cx="1735.75" cy="99.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1735.2344,100.0156 Q1733.375,99.3125 1732.7188,98.5469 Q1732.0781,97.7656 1732.0781,96.4531 Q1732.0781,94.7656 1733.1563,93.7969 Q1734.2344,92.8281 1736.1094,92.8281 Q1736.9688,92.8281 1737.8125,93.0313 Q1738.6719,93.2188 1739.5156,93.6094 L1739.5156,96 Q1738.7344,95.4375 1737.9063,95.1563 Q1737.0938,94.8594 1736.2969,94.8594 Q1735.4219,94.8594 1734.9375,95.2188 Q1734.4688,95.5781 1734.4688,96.2344 Q1734.4688,96.75 1734.8125,97.0938 Q1735.1563,97.4219 1736.25,97.8281 L1737.3125,98.2344 Q1738.7969,98.7813 1739.5,99.6875 Q1740.2188,100.5938 1740.2188,101.9688 Q1740.2188,103.8438 1739.1094,104.7656 Q1738,105.6875 1735.75,105.6875 Q1734.8281,105.6875 1733.9063,105.4688 Q1732.9844,105.25 1732.125,104.8281 L1732.125,102.2969 Q1733.0938,102.9844 1734.0156,103.3281 Q1734.9375,103.6719 1735.8281,103.6719 Q1736.7344,103.6719 1737.2344,103.2656 Q1737.7344,102.8438 1737.7344,102.1094 Q1737.7344,101.5469 1737.3906,101.1406 Q1737.0625,100.7188 1736.4375,100.4688 L1735.2344,100.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="1756.25" y="103.6074">ConnManage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1674" x2="1888" y1="115.4531" y2="115.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1681" y="123.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="1693" y="129.6636">conns</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="1731" y="129.6636">map</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="1756" y="129.6636">[uint64]Conn</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1681" y="136.2578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="1693" y="142.4683">mu sync.RWMutex</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1674" x2="1888" y1="149.0625" y2="149.0625"/><ellipse cx="1684" cy="160.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="1693" y="163.2729">Add(conn Conn)</text><ellipse cx="1684" cy="172.8672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="1693" y="176.0776">Remove(conn Conn)</text><ellipse cx="1684" cy="185.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="1693" y="188.8823">GetConnById(connId uint64) Conn</text><ellipse cx="1684" cy="198.4766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="1693" y="201.687">All()</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="1718" y="201.687">map</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="1743" y="201.687">[uint64]Conn</text><ellipse cx="1684" cy="211.2813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="1693" y="214.4917">Len() int</text><ellipse cx="1684" cy="224.0859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="1693" y="227.2964">String() string</text><!--MD5=[0015359170ce00fa2929b9cff1eae578]
class server.DataPack--><rect fill="#FEFECE" height="112.0234" id="server.DataPack" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="299" x="831.5" y="383.4531"/><ellipse cx="946.75" cy="399.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M946.2344,400.0156 Q944.375,399.3125 943.7188,398.5469 Q943.0781,397.7656 943.0781,396.4531 Q943.0781,394.7656 944.1563,393.7969 Q945.2344,392.8281 947.1094,392.8281 Q947.9688,392.8281 948.8125,393.0313 Q949.6719,393.2188 950.5156,393.6094 L950.5156,396 Q949.7344,395.4375 948.9063,395.1563 Q948.0938,394.8594 947.2969,394.8594 Q946.4219,394.8594 945.9375,395.2188 Q945.4688,395.5781 945.4688,396.2344 Q945.4688,396.75 945.8125,397.0938 Q946.1563,397.4219 947.25,397.8281 L948.3125,398.2344 Q949.7969,398.7813 950.5,399.6875 Q951.2188,400.5938 951.2188,401.9688 Q951.2188,403.8438 950.1094,404.7656 Q949,405.6875 946.75,405.6875 Q945.8281,405.6875 944.9063,405.4688 Q943.9844,405.25 943.125,404.8281 L943.125,402.2969 Q944.0938,402.9844 945.0156,403.3281 Q945.9375,403.6719 946.8281,403.6719 Q947.7344,403.6719 948.2344,403.2656 Q948.7344,402.8438 948.7344,402.1094 Q948.7344,401.5469 948.3906,401.1406 Q948.0625,400.7188 947.4375,400.4688 L946.2344,400.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="967.25" y="403.6074">DataPack</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="832.5" x2="1129.5" y1="415.4531" y2="415.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="839.5" y="423.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="851.5" y="429.6636">m Message</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="832.5" x2="1129.5" y1="436.2578" y2="436.2578"/><ellipse cx="842.5" cy="447.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="851.5" y="450.4683">HeadSize() uint32</text><ellipse cx="842.5" cy="460.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="851.5" y="463.2729">Packet(msgHeader *Message) ([]byte, error)</text><ellipse cx="842.5" cy="472.8672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="851.5" y="476.0776">UnPack(pkg []byte) (*Message, error)</text><ellipse cx="842.5" cy="485.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="273" x="851.5" y="488.8823">UnPackFromConn(conn Conn) (*Message, error)</text><!--MD5=[1a4ee88637cfe751f62f4293ccc63d06]
class server.Handler--><rect fill="#FEFECE" height="86.4141" id="server.Handler" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="1224.5" y="115.4531"/><ellipse cx="1279.25" cy="131.4531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1275.1719,127.2188 L1275.1719,125.0625 L1282.5625,125.0625 L1282.5625,127.2188 L1280.0938,127.2188 L1280.0938,135.2969 L1282.5625,135.2969 L1282.5625,137.4531 L1275.1719,137.4531 L1275.1719,135.2969 L1277.6406,135.2969 L1277.6406,127.2188 L1275.1719,127.2188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="49" x="1299.75" y="135.6074">Handler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1225.5" x2="1390.5" y1="147.4531" y2="147.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1225.5" x2="1390.5" y1="155.4531" y2="155.4531"/><ellipse cx="1235.5" cy="166.4531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="1244.5" y="169.6636">BeforeHandle( *Request)</text><ellipse cx="1235.5" cy="179.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="1244.5" y="182.4683">Handle( *Request)</text><ellipse cx="1235.5" cy="192.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="1244.5" y="195.2729">AfterHandle( *Request)</text><!--MD5=[4b319bdc30d6b78240e32de6835069f7]
class server.HeartBeat--><rect fill="#FEFECE" height="73.6094" id="server.HeartBeat" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1924" y="121.4531"/><ellipse cx="1939" cy="137.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1938.4844,138.0156 Q1936.625,137.3125 1935.9688,136.5469 Q1935.3281,135.7656 1935.3281,134.4531 Q1935.3281,132.7656 1936.4063,131.7969 Q1937.4844,130.8281 1939.3594,130.8281 Q1940.2188,130.8281 1941.0625,131.0313 Q1941.9219,131.2188 1942.7656,131.6094 L1942.7656,134 Q1941.9844,133.4375 1941.1563,133.1563 Q1940.3438,132.8594 1939.5469,132.8594 Q1938.6719,132.8594 1938.1875,133.2188 Q1937.7188,133.5781 1937.7188,134.2344 Q1937.7188,134.75 1938.0625,135.0938 Q1938.4063,135.4219 1939.5,135.8281 L1940.5625,136.2344 Q1942.0469,136.7813 1942.75,137.6875 Q1943.4688,138.5938 1943.4688,139.9688 Q1943.4688,141.8438 1942.3594,142.7656 Q1941.25,143.6875 1939,143.6875 Q1938.0781,143.6875 1937.1563,143.4688 Q1936.2344,143.25 1935.375,142.8281 L1935.375,140.2969 Q1936.3438,140.9844 1937.2656,141.3281 Q1938.1875,141.6719 1939.0781,141.6719 Q1939.9844,141.6719 1940.4844,141.2656 Q1940.9844,140.8438 1940.9844,140.1094 Q1940.9844,139.5469 1940.6406,139.1406 Q1940.3125,138.7188 1939.6875,138.4688 L1938.4844,138.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="1953" y="141.6074">HeartBeat</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1925" x2="2019" y1="153.4531" y2="153.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1932" y="161.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="1944" y="167.6636">conn Conn</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1925" x2="2019" y1="174.2578" y2="174.2578"/><ellipse cx="1935" cy="185.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="1944" y="188.4683">Start()</text><!--MD5=[4b2a4ecea34b3710f9410f5eaf1490de]
class server.Message--><rect fill="#FEFECE" height="163.2422" id="server.Message" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="2055" y="76.9531"/><ellipse cx="2105.75" cy="92.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2105.2344,93.5156 Q2103.375,92.8125 2102.7188,92.0469 Q2102.0781,91.2656 2102.0781,89.9531 Q2102.0781,88.2656 2103.1563,87.2969 Q2104.2344,86.3281 2106.1094,86.3281 Q2106.9688,86.3281 2107.8125,86.5313 Q2108.6719,86.7188 2109.5156,87.1094 L2109.5156,89.5 Q2108.7344,88.9375 2107.9063,88.6563 Q2107.0938,88.3594 2106.2969,88.3594 Q2105.4219,88.3594 2104.9375,88.7188 Q2104.4688,89.0781 2104.4688,89.7344 Q2104.4688,90.25 2104.8125,90.5938 Q2105.1563,90.9219 2106.25,91.3281 L2107.3125,91.7344 Q2108.7969,92.2813 2109.5,93.1875 Q2110.2188,94.0938 2110.2188,95.4688 Q2110.2188,97.3438 2109.1094,98.2656 Q2108,99.1875 2105.75,99.1875 Q2104.8281,99.1875 2103.9063,98.9688 Q2102.9844,98.75 2102.125,98.3281 L2102.125,95.7969 Q2103.0938,96.4844 2104.0156,96.8281 Q2104.9375,97.1719 2105.8281,97.1719 Q2106.7344,97.1719 2107.2344,96.7656 Q2107.7344,96.3438 2107.7344,95.6094 Q2107.7344,95.0469 2107.3906,94.6406 Q2107.0625,94.2188 2106.4375,93.9688 L2105.2344,93.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="2126.25" y="97.1074">Message</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2056" x2="2220" y1="108.9531" y2="108.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2063" y="116.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="2075" y="123.1636">dataLen uint32</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2063" y="129.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="2075" y="135.9683">data []byte</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2063" y="142.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="2075" y="148.7729">typ MessageType</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2056" x2="2220" y1="155.3672" y2="155.3672"/><ellipse cx="2066" cy="166.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="2075" y="169.5776">DataLen() uint32</text><ellipse cx="2066" cy="179.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="2075" y="182.3823">Data() []byte</text><ellipse cx="2066" cy="191.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="2075" y="195.187">Type() MessageType</text><ellipse cx="2066" cy="204.7813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="2075" y="207.9917">SetDataLen(len uint32)</text><ellipse cx="2066" cy="217.5859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="2075" y="220.7964">SetData(data []byte)</text><ellipse cx="2066" cy="230.3906" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="2075" y="233.6011">SetType(t MessageType)</text><!--MD5=[1f54e61f2d66b0b368c86e1d10673ab8]
class server.MessageType--><rect fill="#FEFECE" height="60.8047" id="server.MessageType" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1073" y="127.9531"/><ellipse cx="1088" cy="143.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1083.9219,139.7188 L1083.9219,137.5625 L1091.3125,137.5625 L1091.3125,139.7188 L1088.8438,139.7188 L1088.8438,147.7969 L1091.3125,147.7969 L1091.3125,149.9531 L1083.9219,149.9531 L1083.9219,147.7969 L1086.3906,147.7969 L1086.3906,139.7188 L1083.9219,139.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="1102" y="148.1074">MessageType</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1074" x2="1188" y1="159.9531" y2="159.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1074" x2="1188" y1="167.9531" y2="167.9531"/><ellipse cx="1084" cy="178.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="1093" y="182.1636">ID() []byte</text><!--MD5=[08b6bc5c6b967294afc56e2793f1b57b]
class server.Monitor--><rect fill="#FEFECE" height="73.6094" id="server.Monitor" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="280" x="1750" y="402.4531"/><ellipse cx="1862.25" cy="418.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1861.7344,419.0156 Q1859.875,418.3125 1859.2188,417.5469 Q1858.5781,416.7656 1858.5781,415.4531 Q1858.5781,413.7656 1859.6563,412.7969 Q1860.7344,411.8281 1862.6094,411.8281 Q1863.4688,411.8281 1864.3125,412.0313 Q1865.1719,412.2188 1866.0156,412.6094 L1866.0156,415 Q1865.2344,414.4375 1864.4063,414.1563 Q1863.5938,413.8594 1862.7969,413.8594 Q1861.9219,413.8594 1861.4375,414.2188 Q1860.9688,414.5781 1860.9688,415.2344 Q1860.9688,415.75 1861.3125,416.0938 Q1861.6563,416.4219 1862.75,416.8281 L1863.8125,417.2344 Q1865.2969,417.7813 1866,418.6875 Q1866.7188,419.5938 1866.7188,420.9688 Q1866.7188,422.8438 1865.6094,423.7656 Q1864.5,424.6875 1862.25,424.6875 Q1861.3281,424.6875 1860.4063,424.4688 Q1859.4844,424.25 1858.625,423.8281 L1858.625,421.2969 Q1859.5938,421.9844 1860.5156,422.3281 Q1861.4375,422.6719 1862.3281,422.6719 Q1863.2344,422.6719 1863.7344,422.2656 Q1864.2344,421.8438 1864.2344,421.1094 Q1864.2344,420.5469 1863.8906,420.1406 Q1863.5625,419.7188 1862.9375,419.4688 L1861.7344,419.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="1882.75" y="422.6074">Monitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1751" x2="2029" y1="434.4531" y2="434.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1758" y="442.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="1770" y="448.6636">server Server</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1751" x2="2029" y1="455.2578" y2="455.2578"/><ellipse cx="1761" cy="466.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="1770" y="469.4683">Start(output io.Writer, interval time.Duration)</text><!--MD5=[75f8e670058aadf4d7f9de3fcfd43d0c]
class server.Pack--><rect fill="#FEFECE" height="86.4141" id="server.Pack" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="238" x="800" y="115.4531"/><ellipse cx="900.25" cy="131.4531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M896.1719,127.2188 L896.1719,125.0625 L903.5625,125.0625 L903.5625,127.2188 L901.0938,127.2188 L901.0938,135.2969 L903.5625,135.2969 L903.5625,137.4531 L896.1719,137.4531 L896.1719,135.2969 L898.6406,135.2969 L898.6406,127.2188 L896.1719,127.2188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="29" x="920.75" y="135.6074">Pack</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="801" x2="1037" y1="147.4531" y2="147.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="801" x2="1037" y1="155.4531" y2="155.4531"/><ellipse cx="811" cy="166.4531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="820" y="169.6636">HeadSize() uint32</text><ellipse cx="811" cy="179.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="820" y="182.4683">Packet(msgHeader *Message) ([]byte, error)</text><ellipse cx="811" cy="192.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="191" x="820" y="195.2729">UnPack( []byte) (*Message, error)</text><!--MD5=[2af45c097c01a45312c616d287e2886c]
class server.Pool--><rect fill="#FEFECE" height="137.6328" id="server.Pool" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="284" x="403" y="89.4531"/><ellipse cx="527.25" cy="105.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M526.7344,106.0156 Q524.875,105.3125 524.2188,104.5469 Q523.5781,103.7656 523.5781,102.4531 Q523.5781,100.7656 524.6563,99.7969 Q525.7344,98.8281 527.6094,98.8281 Q528.4688,98.8281 529.3125,99.0313 Q530.1719,99.2188 531.0156,99.6094 L531.0156,102 Q530.2344,101.4375 529.4063,101.1563 Q528.5938,100.8594 527.7969,100.8594 Q526.9219,100.8594 526.4375,101.2188 Q525.9688,101.5781 525.9688,102.2344 Q525.9688,102.75 526.3125,103.0938 Q526.6563,103.4219 527.75,103.8281 L528.8125,104.2344 Q530.2969,104.7813 531,105.6875 Q531.7188,106.5938 531.7188,107.9688 Q531.7188,109.8438 530.6094,110.7656 Q529.5,111.6875 527.25,111.6875 Q526.3281,111.6875 525.4063,111.4688 Q524.4844,111.25 523.625,110.8281 L523.625,108.2969 Q524.5938,108.9844 525.5156,109.3281 Q526.4375,109.6719 527.3281,109.6719 Q528.2344,109.6719 528.7344,109.2656 Q529.2344,108.8438 529.2344,108.1094 Q529.2344,107.5469 528.8906,107.1406 Q528.5625,106.7188 527.9375,106.4688 L526.7344,106.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="27" x="547.75" y="109.6074">Pool</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="404" x2="686" y1="121.4531" y2="121.4531"/><ellipse cx="414" cy="132.4531" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="423" y="135.6636">Size uint64</text><ellipse cx="414" cy="145.2578" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="423" y="148.4683">WorkQueue []</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="499" y="148.4683">chan</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="530" y="148.4683">*Request</text><ellipse cx="414" cy="158.0625" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="423" y="161.2729">R *Router</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="404" x2="686" y1="167.8672" y2="167.8672"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="411" y="175.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="423" y="182.0776">doWork(ctx context.Context, c</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="594" y="182.0776">chan</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="625" y="182.0776">*Request)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="427" y="194.8823"/><ellipse cx="414" cy="204.4766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="423" y="207.687">AddWork(r *Request)</text><ellipse cx="414" cy="217.2813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="423" y="220.4917">StartWorkerPool(ctx context.Context)</text><!--MD5=[d01dd2c21f94bbdfd89509bb242cd3c7]
class server.Request--><rect fill="#FEFECE" height="112.0234" id="server.Request" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="355" y="383.4531"/><ellipse cx="407.75" cy="399.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M407.2344,400.0156 Q405.375,399.3125 404.7188,398.5469 Q404.0781,397.7656 404.0781,396.4531 Q404.0781,394.7656 405.1563,393.7969 Q406.2344,392.8281 408.1094,392.8281 Q408.9688,392.8281 409.8125,393.0313 Q410.6719,393.2188 411.5156,393.6094 L411.5156,396 Q410.7344,395.4375 409.9063,395.1563 Q409.0938,394.8594 408.2969,394.8594 Q407.4219,394.8594 406.9375,395.2188 Q406.4688,395.5781 406.4688,396.2344 Q406.4688,396.75 406.8125,397.0938 Q407.1563,397.4219 408.25,397.8281 L409.3125,398.2344 Q410.7969,398.7813 411.5,399.6875 Q412.2188,400.5938 412.2188,401.9688 Q412.2188,403.8438 411.1094,404.7656 Q410,405.6875 407.75,405.6875 Q406.8281,405.6875 405.9063,405.4688 Q404.9844,405.25 404.125,404.8281 L404.125,402.2969 Q405.0938,402.9844 406.0156,403.3281 Q406.9375,403.6719 407.8281,403.6719 Q408.7344,403.6719 409.2344,403.2656 Q409.7344,402.8438 409.7344,402.1094 Q409.7344,401.5469 409.3906,401.1406 Q409.0625,400.7188 408.4375,400.4688 L407.2344,400.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="52" x="428.25" y="403.6074">Request</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="356" x2="520" y1="415.4531" y2="415.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="363" y="423.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="375" y="429.6636">msgHeader *Message</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="363" y="436.2578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="375" y="442.4683">conn Conn</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="356" x2="520" y1="449.0625" y2="449.0625"/><ellipse cx="366" cy="460.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="375" y="463.2729">Conn() Conn</text><ellipse cx="366" cy="472.8672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="375" y="476.0776">Data() []byte</text><ellipse cx="366" cy="485.6719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="375" y="488.8823">MsgType() MessageType</text><!--MD5=[3323faa60bfec86eff436e04aec842df]
class server.Router--><rect fill="#FEFECE" height="86.4141" id="server.Router" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="556" y="396.4531"/><ellipse cx="650.75" cy="412.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M650.2344,413.0156 Q648.375,412.3125 647.7188,411.5469 Q647.0781,410.7656 647.0781,409.4531 Q647.0781,407.7656 648.1563,406.7969 Q649.2344,405.8281 651.1094,405.8281 Q651.9688,405.8281 652.8125,406.0313 Q653.6719,406.2188 654.5156,406.6094 L654.5156,409 Q653.7344,408.4375 652.9063,408.1563 Q652.0938,407.8594 651.2969,407.8594 Q650.4219,407.8594 649.9375,408.2188 Q649.4688,408.5781 649.4688,409.2344 Q649.4688,409.75 649.8125,410.0938 Q650.1563,410.4219 651.25,410.8281 L652.3125,411.2344 Q653.7969,411.7813 654.5,412.6875 Q655.2188,413.5938 655.2188,414.9688 Q655.2188,416.8438 654.1094,417.7656 Q653,418.6875 650.75,418.6875 Q649.8281,418.6875 648.9063,418.4688 Q647.9844,418.25 647.125,417.8281 L647.125,415.2969 Q648.0938,415.9844 649.0156,416.3281 Q649.9375,416.6719 650.8281,416.6719 Q651.7344,416.6719 652.2344,416.2656 Q652.7344,415.8438 652.7344,415.1094 Q652.7344,414.5469 652.3906,414.1406 Q652.0625,413.7188 651.4375,413.4688 L650.2344,413.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="671.25" y="416.6074">Router</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="557" x2="795" y1="428.4531" y2="428.4531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="564" y="436.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="11" x="576" y="442.6636">m</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="591" y="442.6636">map</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="616" y="442.6636">[[]byte]Handler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="557" x2="795" y1="449.2578" y2="449.2578"/><ellipse cx="567" cy="460.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="576" y="463.4683">Do(req *Request) error</text><ellipse cx="567" cy="473.0625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="214" x="576" y="476.2729">Add(t MessageType, handler Handler)</text><!--MD5=[432216b430a913c0c278fa18c40328bb]
class server.Server--><rect fill="#FEFECE" height="124.8281" id="server.Server" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="52.5" y="95.9531"/><ellipse cx="146.75" cy="111.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M142.6719,107.7188 L142.6719,105.5625 L150.0625,105.5625 L150.0625,107.7188 L147.5938,107.7188 L147.5938,115.7969 L150.0625,115.7969 L150.0625,117.9531 L142.6719,117.9531 L142.6719,115.7969 L145.1406,115.7969 L145.1406,107.7188 L142.6719,107.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="167.25" y="116.1074">Server</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="53.5" x2="288.5" y1="127.9531" y2="127.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="53.5" x2="288.5" y1="135.9531" y2="135.9531"/><ellipse cx="63.5" cy="146.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="72.5" y="150.1636">Close( context.Context)</text><ellipse cx="63.5" cy="159.7578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="72.5" y="162.9683">Server( context.Context)</text><ellipse cx="63.5" cy="172.5625" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="72.5" y="175.7729">ConnManage() *ConnManage</text><ellipse cx="63.5" cy="185.3672" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="72.5" y="188.5776">AddHandler( MessageType,  Handler)</text><ellipse cx="63.5" cy="198.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="72.5" y="201.3823">Pool() *Pool</text><ellipse cx="63.5" cy="210.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="72.5" y="214.187">Router() *Router</text><!--MD5=[e0816089e3e62cfc32b25ef9f7f97125]
class server.TCPConn--><rect fill="#FEFECE" height="252.875" id="server.TCPConn" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="1503" y="312.9531"/><ellipse cx="1577.25" cy="328.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1576.7344,329.5156 Q1574.875,328.8125 1574.2188,328.0469 Q1573.5781,327.2656 1573.5781,325.9531 Q1573.5781,324.2656 1574.6563,323.2969 Q1575.7344,322.3281 1577.6094,322.3281 Q1578.4688,322.3281 1579.3125,322.5313 Q1580.1719,322.7188 1581.0156,323.1094 L1581.0156,325.5 Q1580.2344,324.9375 1579.4063,324.6563 Q1578.5938,324.3594 1577.7969,324.3594 Q1576.9219,324.3594 1576.4375,324.7188 Q1575.9688,325.0781 1575.9688,325.7344 Q1575.9688,326.25 1576.3125,326.5938 Q1576.6563,326.9219 1577.75,327.3281 L1578.8125,327.7344 Q1580.2969,328.2813 1581,329.1875 Q1581.7188,330.0938 1581.7188,331.4688 Q1581.7188,333.3438 1580.6094,334.2656 Q1579.5,335.1875 1577.25,335.1875 Q1576.3281,335.1875 1575.4063,334.9688 Q1574.4844,334.75 1573.625,334.3281 L1573.625,331.7969 Q1574.5938,332.4844 1575.5156,332.8281 Q1576.4375,333.1719 1577.3281,333.1719 Q1578.2344,333.1719 1578.7344,332.7656 Q1579.2344,332.3438 1579.2344,331.6094 Q1579.2344,331.0469 1578.8906,330.6406 Q1578.5625,330.2188 1577.9375,329.9688 L1576.7344,329.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="55" x="1597.75" y="333.1074">TCPConn</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1504" x2="1714" y1="344.9531" y2="344.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1511" y="352.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="1523" y="359.1636">server *TCPServer</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1511" y="365.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="1523" y="371.9683">socketConn *net.TCPConn</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1511" y="378.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="1523" y="384.7729">id uint64</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1511" y="391.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="1523" y="397.5776">isClose bool</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1511" y="404.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="1523" y="410.3823">heartbeatChan</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="1611" y="410.3823">chan</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1642" y="410.3823"/><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="1642" y="410.3823">struct</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1675" y="410.3823">{}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1504" x2="1714" y1="416.9766" y2="416.9766"/><ellipse cx="1514" cy="427.9766" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="1523" y="431.187">Close()</text><ellipse cx="1514" cy="440.7813" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="1523" y="443.9917">Server() Server</text><ellipse cx="1514" cy="453.5859" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="1523" y="456.7964">SocketConn() net.Conn</text><ellipse cx="1514" cy="466.3906" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="1523" y="469.6011">Addr() net.Addr</text><ellipse cx="1514" cy="479.1953" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="1523" y="482.4058">ConnID() uint64</text><ellipse cx="1514" cy="492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="1523" y="495.2104">Send(data *Message) (int, error)</text><ellipse cx="1514" cy="504.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="1523" y="508.0151">Receive() (*Message, error)</text><ellipse cx="1514" cy="517.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1523" y="520.8198">Handler()</text><ellipse cx="1514" cy="530.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="1523" y="533.6245">IsClose() bool</text><ellipse cx="1514" cy="543.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="1523" y="546.4292">SetIsClose(isClose bool)</text><ellipse cx="1514" cy="556.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1523" y="559.2339">HeartBeatChan()</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="1621" y="559.2339">chan</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1652" y="559.2339"/><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="1652" y="559.2339">struct</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1685" y="559.2339">{}</text><!--MD5=[cc021da040b852324c5d3ee5007bcf0e]
class server.TCPServer--><rect fill="#FEFECE" height="252.875" id="server.TCPServer" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="297" x="22.5" y="312.9531"/><ellipse cx="135.25" cy="328.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M134.7344,329.5156 Q132.875,328.8125 132.2188,328.0469 Q131.5781,327.2656 131.5781,325.9531 Q131.5781,324.2656 132.6563,323.2969 Q133.7344,322.3281 135.6094,322.3281 Q136.4688,322.3281 137.3125,322.5313 Q138.1719,322.7188 139.0156,323.1094 L139.0156,325.5 Q138.2344,324.9375 137.4063,324.6563 Q136.5938,324.3594 135.7969,324.3594 Q134.9219,324.3594 134.4375,324.7188 Q133.9688,325.0781 133.9688,325.7344 Q133.9688,326.25 134.3125,326.5938 Q134.6563,326.9219 135.75,327.3281 L136.8125,327.7344 Q138.2969,328.2813 139,329.1875 Q139.7188,330.0938 139.7188,331.4688 Q139.7188,333.3438 138.6094,334.2656 Q137.5,335.1875 135.25,335.1875 Q134.3281,335.1875 133.4063,334.9688 Q132.4844,334.75 131.625,334.3281 L131.625,331.7969 Q132.5938,332.4844 133.5156,332.8281 Q134.4375,333.1719 135.3281,333.1719 Q136.2344,333.1719 136.7344,332.7656 Q137.2344,332.3438 137.2344,331.6094 Q137.2344,331.0469 136.8906,330.6406 Q136.5625,330.2188 135.9375,329.9688 L134.7344,329.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="155.75" y="333.1074">TCPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="318.5" y1="344.9531" y2="344.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="352.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="42.5" y="359.1636">port string</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="365.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="42.5" y="371.9683">host string</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="378.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="42.5" y="384.7729">router *Router</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="391.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="42.5" y="397.5776">manage *ConnManage</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="404.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="42.5" y="410.3823">pool *Pool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="46.5" y="423.187"/><ellipse cx="33.5" cy="432.7813" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="42.5" y="435.9917">Name string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="318.5" y1="442.5859" y2="442.5859"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="450.5859"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="42.5" y="456.7964">start(ctx context.Context)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="463.3906"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="42.5" y="469.6011">init(ctx context.Context)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="46.5" y="482.4058"/><ellipse cx="33.5" cy="492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="42.5" y="495.2104">Close(ctx context.Context)</text><ellipse cx="33.5" cy="504.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="42.5" y="508.0151">Server(ctx context.Context)</text><ellipse cx="33.5" cy="517.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="42.5" y="520.8198">ConnManage() *ConnManage</text><ellipse cx="33.5" cy="530.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="42.5" y="533.6245">Pool() *Pool</text><ellipse cx="33.5" cy="543.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="271" x="42.5" y="546.4292">AddHandler(typ MessageType, handler Handler)</text><ellipse cx="33.5" cy="556.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="42.5" y="559.2339">Router() *Router</text><!--MD5=[7a56ca59af8b661fcbc98019f22963aa]
class server.__xxx__--><rect fill="#FEFECE" height="73.6094" id="server.__xxx__" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1165.5" y="402.4531"/><ellipse cx="1183.65" cy="418.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1183.1344,419.0156 Q1181.275,418.3125 1180.6188,417.5469 Q1179.9781,416.7656 1179.9781,415.4531 Q1179.9781,413.7656 1181.0563,412.7969 Q1182.1344,411.8281 1184.0094,411.8281 Q1184.8688,411.8281 1185.7125,412.0313 Q1186.5719,412.2188 1187.4156,412.6094 L1187.4156,415 Q1186.6344,414.4375 1185.8063,414.1563 Q1184.9938,413.8594 1184.1969,413.8594 Q1183.3219,413.8594 1182.8375,414.2188 Q1182.3688,414.5781 1182.3688,415.2344 Q1182.3688,415.75 1182.7125,416.0938 Q1183.0563,416.4219 1184.15,416.8281 L1185.2125,417.2344 Q1186.6969,417.7813 1187.4,418.6875 Q1188.1188,419.5938 1188.1188,420.9688 Q1188.1188,422.8438 1187.0094,423.7656 Q1185.9,424.6875 1183.65,424.6875 Q1182.7281,424.6875 1181.8063,424.4688 Q1180.8844,424.25 1180.025,423.8281 L1180.025,421.2969 Q1180.9938,421.9844 1181.9156,422.3281 Q1182.8375,422.6719 1183.7281,422.6719 Q1184.6344,422.6719 1185.1344,422.2656 Q1185.6344,421.8438 1185.6344,421.1094 Q1185.6344,420.5469 1185.2906,420.1406 Q1184.9625,419.7188 1184.3375,419.4688 L1183.1344,419.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="1198.35" y="422.6074">__xxx__</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1166.5" x2="1245.5" y1="434.4531" y2="434.4531"/><ellipse cx="1176.5" cy="445.4531" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="1185.5" y="448.6636">X []byte</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1166.5" x2="1245.5" y1="455.2578" y2="455.2578"/><ellipse cx="1176.5" cy="466.2578" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="1185.5" y="469.4683">ID() []byte</text><!--MD5=[b374fb12981b4442f522e979c4dad22e]
class server.debug--><rect fill="#FEFECE" height="60.8047" id="server.debug" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="2065.5" y="408.9531"/><ellipse cx="2118.75" cy="424.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2118.2344,425.5156 Q2116.375,424.8125 2115.7188,424.0469 Q2115.0781,423.2656 2115.0781,421.9531 Q2115.0781,420.2656 2116.1563,419.2969 Q2117.2344,418.3281 2119.1094,418.3281 Q2119.9688,418.3281 2120.8125,418.5313 Q2121.6719,418.7188 2122.5156,419.1094 L2122.5156,421.5 Q2121.7344,420.9375 2120.9063,420.6563 Q2120.0938,420.3594 2119.2969,420.3594 Q2118.4219,420.3594 2117.9375,420.7188 Q2117.4688,421.0781 2117.4688,421.7344 Q2117.4688,422.25 2117.8125,422.5938 Q2118.1563,422.9219 2119.25,423.3281 L2120.3125,423.7344 Q2121.7969,424.2813 2122.5,425.1875 Q2123.2188,426.0938 2123.2188,427.4688 Q2123.2188,429.3438 2122.1094,430.2656 Q2121,431.1875 2118.75,431.1875 Q2117.8281,431.1875 2116.9063,430.9688 Q2115.9844,430.75 2115.125,430.3281 L2115.125,427.7969 Q2116.0938,428.4844 2117.0156,428.8281 Q2117.9375,429.1719 2118.8281,429.1719 Q2119.7344,429.1719 2120.2344,428.7656 Q2120.7344,428.3438 2120.7344,427.6094 Q2120.7344,427.0469 2120.3906,426.6406 Q2120.0625,426.2188 2119.4375,425.9688 L2118.2344,425.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="40" x="2139.25" y="429.1074">debug</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2066.5" x2="2219.5" y1="440.9531" y2="440.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2066.5" x2="2219.5" y1="448.9531" y2="448.9531"/><ellipse cx="2076.5" cy="459.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="2085.5" y="463.1636">PrintTypMap(r *Router)</text><!--MD5=[b705b765d7d055ff4a35bb1c5866b946]
class server.errorHandler--><rect fill="#FEFECE" height="48" id="server.errorHandler" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="1154" y="632.4531"/><ellipse cx="1169" cy="648.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1168.4844,649.0156 Q1166.625,648.3125 1165.9688,647.5469 Q1165.3281,646.7656 1165.3281,645.4531 Q1165.3281,643.7656 1166.4063,642.7969 Q1167.4844,641.8281 1169.3594,641.8281 Q1170.2188,641.8281 1171.0625,642.0313 Q1171.9219,642.2188 1172.7656,642.6094 L1172.7656,645 Q1171.9844,644.4375 1171.1563,644.1563 Q1170.3438,643.8594 1169.5469,643.8594 Q1168.6719,643.8594 1168.1875,644.2188 Q1167.7188,644.5781 1167.7188,645.2344 Q1167.7188,645.75 1168.0625,646.0938 Q1168.4063,646.4219 1169.5,646.8281 L1170.5625,647.2344 Q1172.0469,647.7813 1172.75,648.6875 Q1173.4688,649.5938 1173.4688,650.9688 Q1173.4688,652.8438 1172.3594,653.7656 Q1171.25,654.6875 1169,654.6875 Q1168.0781,654.6875 1167.1563,654.4688 Q1166.2344,654.25 1165.375,653.8281 L1165.375,651.2969 Q1166.3438,651.9844 1167.2656,652.3281 Q1168.1875,652.6719 1169.0781,652.6719 Q1169.9844,652.6719 1170.4844,652.2656 Q1170.9844,651.8438 1170.9844,651.1094 Q1170.9844,650.5469 1170.6406,650.1406 Q1170.3125,649.7188 1169.6875,649.4688 L1168.4844,649.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="1183" y="652.6074">errorHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1155" x2="1265" y1="664.4531" y2="664.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1155" x2="1265" y1="672.4531" y2="672.4531"/><!--MD5=[a5b9f1feb9664e8cb46e941162106f70]
class server.heartBeatHandler--><rect fill="#FEFECE" height="60.8047" id="server.heartBeatHandler" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="1301" y="625.9531"/><ellipse cx="1317.8" cy="641.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1317.2844,642.5156 Q1315.425,641.8125 1314.7688,641.0469 Q1314.1281,640.2656 1314.1281,638.9531 Q1314.1281,637.2656 1315.2063,636.2969 Q1316.2844,635.3281 1318.1594,635.3281 Q1319.0188,635.3281 1319.8625,635.5313 Q1320.7219,635.7188 1321.5656,636.1094 L1321.5656,638.5 Q1320.7844,637.9375 1319.9563,637.6563 Q1319.1438,637.3594 1318.3469,637.3594 Q1317.4719,637.3594 1316.9875,637.7188 Q1316.5188,638.0781 1316.5188,638.7344 Q1316.5188,639.25 1316.8625,639.5938 Q1317.2063,639.9219 1318.3,640.3281 L1319.3625,640.7344 Q1320.8469,641.2813 1321.55,642.1875 Q1322.2688,643.0938 1322.2688,644.4688 Q1322.2688,646.3438 1321.1594,647.2656 Q1320.05,648.1875 1317.8,648.1875 Q1316.8781,648.1875 1315.9563,647.9688 Q1315.0344,647.75 1314.175,647.3281 L1314.175,644.7969 Q1315.1438,645.4844 1316.0656,645.8281 Q1316.9875,646.1719 1317.8781,646.1719 Q1318.7844,646.1719 1319.2844,645.7656 Q1319.7844,645.3438 1319.7844,644.6094 Q1319.7844,644.0469 1319.4406,643.6406 Q1319.1125,643.2188 1318.4875,642.9688 L1317.2844,642.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="1332.2" y="646.1074">heartBeatHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1302" x2="1448" y1="657.9531" y2="657.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1302" x2="1448" y1="665.9531" y2="665.9531"/><ellipse cx="1312" cy="676.9531" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1321" y="680.1636">Handle(req *Request)</text><!--MD5=[944951835a973f15df5b2c0eb5636e36]
class server.originalHandler--><rect fill="#FEFECE" height="48" id="server.originalHandler" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1484.5" y="632.4531"/><ellipse cx="1499.5" cy="648.4531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1498.9844,649.0156 Q1497.125,648.3125 1496.4688,647.5469 Q1495.8281,646.7656 1495.8281,645.4531 Q1495.8281,643.7656 1496.9063,642.7969 Q1497.9844,641.8281 1499.8594,641.8281 Q1500.7188,641.8281 1501.5625,642.0313 Q1502.4219,642.2188 1503.2656,642.6094 L1503.2656,645 Q1502.4844,644.4375 1501.6563,644.1563 Q1500.8438,643.8594 1500.0469,643.8594 Q1499.1719,643.8594 1498.6875,644.2188 Q1498.2188,644.5781 1498.2188,645.2344 Q1498.2188,645.75 1498.5625,646.0938 Q1498.9063,646.4219 1500,646.8281 L1501.0625,647.2344 Q1502.5469,647.7813 1503.25,648.6875 Q1503.9688,649.5938 1503.9688,650.9688 Q1503.9688,652.8438 1502.8594,653.7656 Q1501.75,654.6875 1499.5,654.6875 Q1498.5781,654.6875 1497.6563,654.4688 Q1496.7344,654.25 1495.875,653.8281 L1495.875,651.2969 Q1496.8438,651.9844 1497.7656,652.3281 Q1498.6875,652.6719 1499.5781,652.6719 Q1500.4844,652.6719 1500.9844,652.2656 Q1501.4844,651.8438 1501.4844,651.1094 Q1501.4844,650.5469 1501.1406,650.1406 Q1500.8125,649.7188 1500.1875,649.4688 L1498.9844,649.0156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="1513.5" y="652.6074">originalHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1485.5" x2="1610.5" y1="664.4531" y2="664.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1485.5" x2="1610.5" y1="672.4531" y2="672.4531"/><!--MD5=[371de7880e1ea0188dec17ddfcc15f8a]
reverse link server.BasicHandler to example.EchoHandler--><path d="M1407.2219,493.6364 C1426.413,520.535 1453.3904,550.5133 1486,565.9531 C1583.969,612.3387 2356.4575,570.3099 2461,598.9531 C2481.9468,604.6922 2503.2886,615.3271 2521.2126,625.9045 " fill="none" id="server.BasicHandler&lt;-example.EchoHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1399.7386,482.7398,1399.8379,489.9502,1406.5319,492.6318,1406.4326,485.4214,1399.7386,482.7398" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="2516.9935" y="614.6842">extends</text><!--MD5=[5e7f0f88b4ca175a435c6c13c9a31667]
reverse link server.BasicHandler to example.HttpEchoPostFormHandler--><path d="M1407.2848,493.5044 C1426.494,520.365 1453.4686,550.3492 1486,565.9531 C1636.6195,638.1988 2075.9359,554.6357 2237,598.9531 C2258.1464,604.7716 2279.7705,615.3523 2297.9943,625.8657 " fill="none" id="server.BasicHandler&lt;-example.HttpEchoPostFormHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1399.793,482.6257,1399.9017,489.836,1406.5992,492.5088,1406.4905,485.2985,1399.793,482.6257" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="2232.2462" y="615.1109">extends</text><!--MD5=[c88da70da61b76d8b03fcf876a817a33]
reverse link server.BasicHandler to server.errorHandler--><path d="M1334.3267,492.9446 C1300.4769,537.4622 1253.8539,598.7785 1228.4047,632.2481 " fill="none" id="server.BasicHandler&lt;-server.errorHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1342.204,482.5848,1335.3883,484.9399,1334.9408,492.1371,1341.7565,489.782,1342.204,482.5848" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="1175.5865" y="621.2076">extends</text><!--MD5=[91fa73f0049605fa6976643bfedd2912]
reverse link server.BasicHandler to server.heartBeatHandler--><path d="M1375,495.7984 C1375,537.2246 1375,591.9606 1375,625.6583 " fill="none" id="server.BasicHandler&lt;-server.heartBeatHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1375,482.5848,1371,488.5848,1375,494.5848,1379,488.5848,1375,482.5848" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="1318.7406" y="614.8608">extends</text><!--MD5=[03fcb7fe2322fc6323270ebcec588ec7]
reverse link server.BasicHandler to server.originalHandler--><path d="M1417.6453,492.9446 C1453.1363,537.4622 1502.0198,598.7785 1528.7029,632.2481 " fill="none" id="server.BasicHandler&lt;-server.originalHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1409.3861,482.5848,1409.9987,489.7699,1416.8666,491.9679,1416.254,484.7829,1409.3861,482.5848" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="1466.2236" y="621.2076">extends</text><!--MD5=[c3ba949664e801dc769b6847ee95975e]
reverse link server.Handler to server.BasicHandler--><path d="M1322.9896,221.3199 C1335.675,274.523 1353.522,349.3736 1364.6664,396.1135 " fill="none" id="server.Handler&lt;-server.BasicHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1316.1515,222.8217,1318.3219,201.7435,1329.7698,219.5746,1316.1515,222.8217" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="1281.2653" y="385.3741">implements</text><!--MD5=[7a445e5e662e88dd1917203f92ce2026]
reverse link server.Pack to server.DataPack--><path d="M932.8753,221.3394 C943.5886,269.895 958.2784,336.4727 968.6014,383.2593 " fill="none" id="server.Pack&lt;-server.DataPack" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="926.0253,222.782,928.5516,201.7435,939.6965,219.7656,926.0253,222.782" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="886.4591" y="372.5702">implements</text><!--MD5=[0dd4f9b51ff5371083cd7d129da277d8]
reverse link server.Conn to server.TCPConn--><path d="M1563.3421,272.8315 C1566.9427,285.9711 1570.6298,299.4266 1574.2714,312.7163 " fill="none" id="server.Conn&lt;-server.TCPConn" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1556.4959,274.334,1557.9613,253.1951,1569.9981,270.6341,1556.4959,274.334" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="1494.0668" y="302.0301">implements</text><!--MD5=[88acdcb3ae3185933368c65bc1d28e7f]
reverse link server.Server to server.TCPServer--><path d="M171,241.4036 C171,263.802 171,288.5594 171,312.7648 " fill="none" id="server.Server&lt;-server.TCPServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="164.0001,241.1653,171,221.1652,178.0001,241.1652,164.0001,241.1653" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="92.8031" y="302.0814">implements</text><!--MD5=[0d475dc41ce2a4264aeb6762d2ff98bc]
reverse link server.MessageType to server.__xxx__--><path d="M1144.3857,208.6048 C1159.2168,264.172 1182.7867,352.4808 1196.0633,402.2235 " fill="none" id="server.MessageType&lt;-server.__xxx__" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1137.5634,210.1887,1139.1691,189.0599,1151.0899,206.5783,1137.5634,210.1887" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="1201.0621" y="391.3696">implements</text><!--MD5=[2ecedf186b130b53437bd3bef810349f]
reverse link server.Pool to server.Request--><path d="M513.9745,239.9314 C496.4505,285.9523 474.9948,342.2985 459.359,383.3606 " fill="none" id="server.Pool&lt;-server.Request" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="518.6878,227.5533,512.8145,231.7372,514.4176,238.7678,520.2908,234.584,518.6878,227.5533" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="484.6211" y="247.1852">uses</text><!--MD5=[fb0aa98c5221ece89f5eb3ab1e68364a]
reverse link server.Pool to server.Router--><path d="M582.8288,239.5973 C606.6911,290.783 636.557,354.8463 655.946,396.4365 " fill="none" id="server.Pool&lt;-server.Router" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="577.214,227.5533,576.1239,234.6816,582.2845,238.4295,583.3746,231.3012,577.214,227.5533" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="548.9085" y="247.1852">uses</text><!--MD5=[dad238c47bc0d6c628171f50af1a9c94]
link server.ConnManage to server.HeartBeat--><!--MD5=[7db21cbdcfe119fb80a57a05170d1fb6]
link server.HeartBeat to server.Message--><!--MD5=[128810f3ab49ab3175c27a1678bf19ca]
link server.ConnManage to server.Monitor--><!--MD5=[dfd93472c2fc0dcf941b6fea04a37989]
link server.Monitor to server.debug--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="158" x="1265" y="722.2354">Generated via www.dumels.com</text><image height="60" width="60" x="1314" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAACW0lEQVR4Xu2aO1LDMBRFH3/YAR0LoYWKkm9BwV5YDXRQBKhImIFhExlaCgpq/rpRHuM8W4lsyUIWujMHHDt++DiyLJkQ5eTk5OQ4Z04x3xLRBbLXipeWiC4Q7iu+FV8eQT0QXVj4TbGiWPXAGul6UQu/i/UuWaAsHDaQqoK39SkRYchckJaRnI23Jyd8SbrXvFUMCpyOtycp/FF4nXyTLgpX5V8LY1kODZvQCWFc50PFkyd4tBU0dYTxHhsgARm53kTQ2Agj3AxnsUi61vl4WW6vImhshW2DeqjF9/DokoUd00j4uCV2qBxbYex7YsknTQrP2vd3YiwnzC6g3gOVz7qNMPfSdY4JnRb2433ldj6m0W0JP3AAB57YI13vntyE8cmhlqxfxSZ2HGerYvsh6Xq/whiF4FbgKxgluQr7Hlpm4baEJZgPJymMuvgj3GlgmV/jtymdF64iyU+4T+XmXMSUzgoPaLqYKckJrys25MpCggjzwGPfAzzwqBLG6x7pE2wKC6PGLpUHEU2ZEAZyKOYC6pmEr8iul27jmEbCRy2xTeXYCCPYV9YzgZbwSOVJgomgsRW2DfodCNeaHoaMb2HUQ+eWhWOJrTAeyC1ZsEy6SUf9EG+WMPfScjhqgntziNsQNHWEITGk8gP1pvCtKWjqCOPaxLL8t0kT+Pl19MK+gmuXm3/Q/FthXE93pJ+KVPFKCQn3SE8epoETkoQwB+LTwKeflPC0QBjNOgs7pDPCGDrKrxE2AV89/JP7sE1YGAcnJ/EuoF60wjeK55aIMpCWw0Nf5OTk5HQnP5VHM9pzOexnAAAAAElFTkSuQmCC" y="724.5938"/><!--MD5=[910b5153b99393f0f518cb0aba739368]
@startuml
skinparamlocked shadowing false
skinparamlocked roundCorner 10
title https://github.com/autsu/redtower
namespace client {
    class Client << (S,Aquamarine) >> {
        - conn server.Conn
        - err error

        + Init(ctx context.Context) (*Client, error)
        + Send(msgHeader *server.Message) (int, error)
        + Receive() (*server.Message, error)

    }
}



namespace example {
    class EchoHandler << (S,Aquamarine) >> {
        + Handle(r *server.Request) 

    }
    class HttpEchoPostFormHandler << (S,Aquamarine) >> {
        + Handle(req *server.Request) 

    }
}
"server.BasicHandler" *- - "extends""example.EchoHandler"
"server.BasicHandler" *- - "extends""example.HttpEchoPostFormHandler"



namespace server {
    class BasicHandler << (S,Aquamarine) >> {
        + BeforeHandle(req *Request) 
        + Handle(req *Request) 
        + AfterHandle(req *Request) 

    }
    interface Conn  {
        + Server() Server
        + SocketConn() net.Conn
        + Addr() net.Addr
        + ConnID() uint64
        + IsClose() bool
        + HeartBeatChan() <font color=blue>chan</font> <font color=blue>struct</font>{}
        + SetIsClose( bool) 
        + Send(data *Message) (int, error)
        + Receive() (*Message, error)
        + Handler() 
        + Close()

    }
    class ConnManage << (S,Aquamarine) >> {
        - conns <font color=blue>map</font>[uint64]Conn
        - mu sync.RWMutex

        + Add(conn Conn) 
        + Remove(conn Conn) 
        + GetConnById(connId uint64) Conn
        + All() <font color=blue>map</font>[uint64]Conn
        + Len() int
        + String() string

    }
    class DataPack << (S,Aquamarine) >> {
        - m Message

        + HeadSize() uint32
        + Packet(msgHeader *Message) ([]byte, error)
        + UnPack(pkg []byte) (*Message, error)
        + UnPackFromConn(conn Conn) (*Message, error)

    }
    interface Handler  {
        + BeforeHandle( *Request) 
        + Handle( *Request) 
        + AfterHandle( *Request) 

    }
    class HeartBeat << (S,Aquamarine) >> {
        - conn Conn

        + Start() 

    }
    class Message << (S,Aquamarine) >> {
        - dataLen uint32
        - data []byte
        - typ MessageType

        + DataLen() uint32
        + Data() []byte
        + Type() MessageType
        + SetDataLen(len uint32) 
        + SetData(data []byte) 
        + SetType(t MessageType) 

    }
    interface MessageType  {
        + ID() []byte

    }
    class Monitor << (S,Aquamarine) >> {
        - server Server

        + Start(output io.Writer, interval time.Duration) 

    }
    interface Pack  {
        + HeadSize() uint32
        + Packet(msgHeader *Message) ([]byte, error)
        + UnPack( []byte) (*Message, error)

    }
    class Pool << (S,Aquamarine) >> {
        + Size uint64
        + WorkQueue []<font color=blue>chan</font> *Request
        + R *Router

        - doWork(ctx context.Context, c <font color=blue>chan</font> *Request) 

        + AddWork(r *Request) 
        + StartWorkerPool(ctx context.Context) 

    }
    class Request << (S,Aquamarine) >> {
        - msgHeader *Message
        - conn Conn

        + Conn() Conn
        + Data() []byte
        + MsgType() MessageType

    }
    class Router << (S,Aquamarine) >> {
        - m <font color=blue>map</font>[[]byte]Handler

        + Do(req *Request) error
        + Add(t MessageType, handler Handler) 

    }
    interface Server  {
        + Close( context.Context)
        + Server( context.Context) 
        + ConnManage() *ConnManage
        + AddHandler( MessageType,  Handler) 
        + Pool() *Pool
        + Router() *Router

    }
    class TCPConn << (S,Aquamarine) >> {
        - server *TCPServer
        - socketConn *net.TCPConn
        - id uint64
        - isClose bool
        - heartbeatChan <font color=blue>chan</font> <font color=blue>struct</font>{}

        + Close()
        + Server() Server
        + SocketConn() net.Conn
        + Addr() net.Addr
        + ConnID() uint64
        + Send(data *Message) (int, error)
        + Receive() (*Message, error)
        + Handler() 
        + IsClose() bool
        + SetIsClose(isClose bool) 
        + HeartBeatChan() <font color=blue>chan</font> <font color=blue>struct</font>{}

    }
    class TCPServer << (S,Aquamarine) >> {
        - port string
        - host string
        - router *Router
        - manage *ConnManage
        - pool *Pool

        + Name string

        - start(ctx context.Context) 
        - init(ctx context.Context) 

        + Close(ctx context.Context)
        + Server(ctx context.Context) 
        + ConnManage() *ConnManage
        + Pool() *Pool
        + AddHandler(typ MessageType, handler Handler) 
        + Router() *Router

    }
    class __xxx__ << (S,Aquamarine) >> {
        + X []byte

        + ID() []byte

    }
    class debug << (S,Aquamarine) >> {
        + PrintTypMap(r *Router) 

    }
    class errorHandler << (S,Aquamarine) >> {
    }
    class heartBeatHandler << (S,Aquamarine) >> {
        + Handle(req *Request) 

    }
    class originalHandler << (S,Aquamarine) >> {
    }
}
"server.BasicHandler" *- - "extends""server.errorHandler"
"server.BasicHandler" *- - "extends""server.heartBeatHandler"
"server.BasicHandler" *- - "extends""server.originalHandler"

"server.Handler" <|- - "implements""server.BasicHandler"
"server.Pack" <|- - "implements""server.DataPack"
"server.Conn" <|- - "implements""server.TCPConn"
"server.Server" <|- - "implements""server.TCPServer"
"server.MessageType" <|- - "implements""server.__xxx__"

"server.Pool""uses" o- - "server.Request"
"server.Pool""uses" o- - "server.Router"


footer  Generated via www.dumels.com\n<img:support_files/svg_placeholders/logo.png{scale=.3}>
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-post-Debian-1deb10u1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>